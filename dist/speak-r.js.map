{"version":3,"file":null,"sources":["es5/lang/syntax.js","es5/model/token.js","es5/model/ramda-piped.js","es5/pipefy.js","es5/util.js","es5/core/fabric.js","es5/core/splitter.js","es5/core/string-preprocess.js","es5/model/lexeme.js","es5/model/head-list.js","es5/lang/tooling.js","es5/print.js","es5/core/tree.js","es5/core/convolve.js","es5/model/outfall.js","es5/core/context.js","es5/core/say.js","es5/index.js"],"sourcesContent":["'use strict';\n\nvar op = {\n  doubledots: '::',\n  comma: ',',\n  dash: '_',\n  arrow: '->',\n  doublearrow: '=>',\n  middlepipe: '<|>',\n  backpipe: '<|',\n  forwardpipe: '|>',\n  equals: '==',\n  plus: '+',\n  minus: '-',\n  map: '[^]',\n  define: ':='\n};\nvar types = {\n  type: 'type',\n  R: 'R',\n  string: 'string',\n  number: 'number',\n  op: 'operator',\n  any: 'any',\n  context: 'context',\n  lex: 'lexeme',\n  F: 'contextF',\n  arg: 'argument'\n};\nvar jstypes = [['Array', Array], ['Number', Number], ['String', String], ['Function', Function], ['Object', Object], ['Null', null], ['RegExp', RegExp]];\nvar quotes = ['\"', \"'\", '`'];\nvar categories = {\n  piped: [types.R, types.context, types.lex],\n  inserted: [types.number, types.string, types.type, types.any],\n  control: [types.op]\n};\nvar lexemeTypes = {\n  pipe: 'Pipe',\n  context: 'Context',\n  atomic: 'AtomicFunc',\n  expr: 'Expression',\n  arg: 'Argument'\n};\nmodule.exports = { op: op, types: types, quotes: quotes, categories: categories, jstypes: jstypes, lexemeTypes: lexemeTypes };","'use strict';\n\nvar R = require('ramda');\nvar types = require('../lang/syntax').types;\n\nvar TokenFabric = R.curry(function (category, obj) {\n  return {\n    type: category,\n    value: obj\n  };\n});\n\nmodule.exports = R.map(function (e) {\n  return TokenFabric(types[e]);\n}, {\n  Type: 'type',\n  R: 'R',\n  String: 'string',\n  Number: 'number',\n  Operator: 'op',\n  Any: 'any',\n  Context: 'context',\n  Arg: 'arg'\n});","'use strict';\n\nvar R = require('ramda');\n\nvar def = function def(func, obj) {\n  return function (prop) {\n    return Object.defineProperty(obj, prop[0], {\n      get: function get() {\n        func(prop[1]);\n        return obj;\n      } });\n  };\n};\nvar appender = function appender(_store) {\n  return function (val) {\n    return _store.push(val);\n  };\n};\nvar setter = function setter(store, ins, dict) {\n  return R.pipe(R.toPairs, R.forEach(def(appender(store), ins)))(dict);\n};\nfunction polymorph(store) {\n  // Doesnt understand wtf is going on here, but seem like this check never fall\n\n  // const inputCheck = (argsArr,_store)=>\n  //   !R.isEmpty(argsArr)\n  //   &&!R.is(Function,argsArr[0])&&\n  //   R.none(R.isNil,argsArr)\n  //   &&!R.isEmpty(_store)\n  return function ins() {\n    // if (inputCheck(val,store)) {\n    store.push(store.pop().apply(undefined, arguments));\n    // }\n    return ins;\n  };\n}\nfunction storage(dict) {\n  var store = [];\n  var ins = polymorph(store);\n  Object.defineProperty(ins, 'store', { get: function get() {\n      return store;\n    } });\n  Object.defineProperty(ins, 'run', { get: function get() {\n      return R.pipe.apply(R, store);\n    } });\n  setter(store, ins, dict);\n  return ins;\n}\nvar RP = {};\nObject.defineProperty(RP, 'do', { get: function get() {\n    return storage(R);\n  } });\n\nmodule.exports = function () {\n  return RP.do;\n};","'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar R = require('ramda');\n\nvar red = function red(func) {\n  return R.reduce(func, []);\n};\nvar reducer = red(logic);\nvar ifArr = R.pipe(R.flatten, reducer, R.flip(R.concat));\nfunction logic(acc, val) {\n  if (R.is(Array)(val)) return ifArr(val)(acc);else return R.append(val, acc);\n}\nfunction P() {\n  for (var _len = arguments.length, data = Array(_len), _key = 0; _key < _len; _key++) {\n    data[_key] = arguments[_key];\n  }\n\n  var actionList = reducer(data);\n  return R.pipe.apply(R, _toConsumableArray(actionList));\n}\n\nmodule.exports = P;","'use strict';\n\nvar R = require('ramda');\nvar debug = require('debug');\n\nvar RP = require('./model/ramda-piped');\n\nvar pipefy = require('./pipefy');\nvar P = pipefy;\n\nvar isof = {\n  String: R.is(String),\n  Func: R.is(Function),\n  Array: R.is(Array),\n  Nil: R.isNil,\n  Real: function Real(e) {\n    return !R.isNil(e);\n  },\n  Empty: R.isEmpty,\n  Full: function Full(e) {\n    return !R.isEmpty(e);\n  }\n};\n\nvar tagvalue = function tagvalue(tag, mess) {\n  return isof.Nil(mess) ? tag : [tag, mess].join(':  ');\n};\nvar log = function log(tag) {\n  return function (mess) {\n    return debug(tagvalue(tag, mess));\n  };\n};\nvar pipelog = function pipelog(tag) {\n  return function (mess) {\n    return R.tap(log(tag)(mess));\n  };\n};\n\nvar arrayify = R.pipe(R.defaultTo([]), R.unless(isof.Array, R.of));\n\n// const P = (...pipes)=>R.apply(R.pipe,R.filter(isof.Func,pipes))\n\n\nvar isContainOrEq = P(arrayify, R.flip(R.contains));\n\nvar _require = require('sanctuary');\n\nvar create = _require.create;\nvar env = _require.env;\n\nvar checkTypes = false; //process.env.NODE_ENV !== 'production';\nvar S = create({ checkTypes: checkTypes, env: env });\n\nvar prop = R.map(R.prop, {\n  type: 'type',\n  val: 'value',\n  head: 'head',\n  tail: 'tail',\n  data: 'data'\n});\n\nvar isString = isof.String;\n\nmodule.exports = {\n  pipelog: pipelog, log: log, isString: isString, arrayify: arrayify, P: P, isof: isof, isContainOrEq: isContainOrEq, prop: prop, RP: RP, S: S\n};","'use strict';\n\nvar R = require('ramda');\nvar syntax = require('../lang/syntax');\n\nvar Token = require('../model/token');\nvar util = require('../util');\nvar S = util.S;\nvar P = util.P;\n\nvar isString = util.isString;\n// const log = util.log('fabric')\n// const pipelog = util.pipelog('fabric')\n\nfunction TokenFabric(tokenType, condition, transformation) {\n  var onCondition = P(util.arrayify, R.allPass, S.either(R.__, R.F));\n  var appendArray = R.flip(R.concat);\n  var addSteps = appendArray([tokenType, S.Right]);\n  var transformUntouched = P(util.arrayify, addSteps, P, function (e) {\n    return S.either(e, R.identity);\n  });\n  return R.when(onCondition(condition), transformUntouched(transformation));\n}\n\nvar quoteProcessor = function quoteProcessor() {\n  var isQuote = R.anyPass(R.map(R.equals, syntax.quotes));\n  var isQuoted = R.allPass([P(R.head, isQuote), P(R.last, isQuote)]);\n  var removeQuotes = P(R.init, R.tail);\n  return TokenFabric(Token.String, [isString, isQuoted], [R.trim, removeQuotes]);\n};\nvar typesProcessor = function typesProcessor() {\n  var types = new Map(syntax.jstypes);\n  var isInMap = function isInMap(obj) {\n    return isString(obj) ? types.has(obj) : false;\n  };\n  return TokenFabric(Token.Type, isInMap, function (e) {\n    return types.get(e);\n  });\n};\n\nvar isNumber = TokenFabric(Token.Number, isFinite, parseFloat);\nvar vendorProcessor = function vendorProcessor() {\n  var isFunc = R.is(Function);\n  var isRamda = function isRamda(obj) {\n    return isFunc(R[obj]);\n  };\n  return TokenFabric(Token.R, [isString, isRamda], R.prop(R.__, R));\n};\nvar contextValidation = function contextValidation(str) {\n  return P(R.match(/\\D\\w+/), R.head, R.equals(str))(str);\n};\nvar isContext = TokenFabric(Token.Context, contextValidation);\nvar argValidation = R.both(P(R.head, R.equals('@')), P(R.tail, contextValidation));\nvar isArg = TokenFabric(Token.Arg, argValidation, R.tail);\n\nvar preprocess = S.lift(R.when(isString, R.trim));\nvar postprocess = R.identity;\nmodule.exports = {\n  isQuote: quoteProcessor(),\n  isType: typesProcessor(),\n  isVendor: vendorProcessor(),\n  isNumber: isNumber,\n  isContext: isContext,\n  isArg: isArg,\n  preprocess: preprocess,\n  postprocess: postprocess\n};","'use strict';\n\nvar R = require('ramda');\nvar util = require('../util');\nvar P = util.P;\n\nvar Token = require('../model/token');\nvar log = util.pipelog('splitter');\nvar operators = R.values(require('../lang/syntax').op); //TODO rewrite op list using\n\nvar stringMorpher = function stringMorpher(morph) {\n  return R.map(R.when(util.isof.String, morph));\n};\nvar stringTrim = stringMorpher(R.trim);\nvar rejectEmpty = R.reject(R.isEmpty);\n\nvar opersFuncs = [R.split, P(Token.Operator, R.intersperse)];\n\nvar constFuncs = [rejectEmpty, R.unnest];\n\nvar splitCond = function splitCond(symb) {\n  return R.cond([[util.isof.String, symb], [R.T, log('uncaught')]]);\n};\nvar unnester = function unnester(symbPipe) {\n  return P(symbPipe, R.unnest);\n};\nvar splitsPipe = [R.of, R.ap(opersFuncs), R.concat(R.__, constFuncs), P, splitCond, R.map, unnester, log('splitPipe')];\nvar splitter = P(P, R.map(R.__, operators), P)(splitsPipe);\nvar cleaner = P(R.unnest, stringTrim, rejectEmpty, log('end'));\nvar execFuncs = [util.arrayify, splitter, cleaner];\nvar exec = P(execFuncs);\nmodule.exports = { exec: exec, cleaner: cleaner };","'use strict';\n\nvar R = require('ramda');\n\nvar fab = require('./fabric');\n\nvar splitter = require('./splitter');\n\nvar util = require('../util');\nvar S = util.S;\n\nvar pipelog = util.pipelog('preproc');\nvar singleWordParsing = R.pipe(fab.preprocess, pipelog('->isQuote'), fab.isQuote, pipelog('->isNumber'), fab.isNumber, pipelog('->isType'), fab.isType, pipelog('->isVendor'), fab.isVendor, pipelog('->isArg'), fab.isArg, pipelog('->isContext'), fab.isContext, pipelog('->postprocess'), fab.postprocess);\nfunction splitKeywords(data) {\n  var err = R.unless(util.isString, function () {\n    throw new Error('`keywords` should be String');\n  });\n  var beforeSplit = R.pipe(err, R.split(' '), R.reject(R.isEmpty));\n  var sSort = R.map(R.ifElse(R.is(Object), S.Right, S.Left));\n  var _drops = function _drops(a, b) {\n    return R.allPass([R.propEq('type', 'operator'), R.propEq('obj', ','), R.eqProps('obj', R.__, b)])(a);\n  };\n  var drops = R.dropRepeatsWith(_drops);\n  var un = R.unary(R.pipe(beforeSplit, splitter.exec, sSort, pipelog('тэг'), R.map(singleWordParsing), drops));\n  fab;\n  return un(data);\n}\n\nmodule.exports = splitKeywords;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar R = require('ramda');\n\nvar lexemeTypes = require('../lang/syntax').lexemeTypes;\n\nvar ILexeme = function ILexeme(typename, obj) {\n  _classCallCheck(this, ILexeme);\n\n  obj.index = obj.head.index;\n  obj.lexeme = typename;\n  return obj;\n};\n\nvar Lexeme = function () {\n  function Lexeme() {\n    _classCallCheck(this, Lexeme);\n  }\n\n  _createClass(Lexeme, null, [{\n    key: 'Pipe',\n    value: function Pipe(tokensHList) {\n      return new ILexeme(lexemeTypes.pipe, tokensHList);\n    }\n  }, {\n    key: 'AtomicFunc',\n    value: function AtomicFunc(tokensHList) {\n      return new ILexeme(lexemeTypes.atomic, tokensHList);\n    }\n  }, {\n    key: 'Expression',\n    value: function Expression(tokensHList) {\n      return new ILexeme(lexemeTypes.expr, tokensHList);\n    }\n  }, {\n    key: 'Argument',\n    value: function Argument(tokensHList) {\n      return new ILexeme(lexemeTypes.arg, tokensHList);\n    }\n  }, {\n    key: 'Context',\n    value: function Context(token) {\n      return new Lexeme(lexemeTypes.context, token);\n    }\n  }, {\n    key: 'its',\n    get: function get() {\n      var eq = R.propEq('lexeme');\n      return R.map(eq, lexemeTypes);\n    }\n  }]);\n\n  return Lexeme;\n}();\n\nmodule.exports = Lexeme;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar R = require('ramda');\n\nvar util = require('../util');\nvar S = util.S;\n\nvar P = util.P;\n\nvar HeadList = function () {\n  function HeadList(rawList, head) {\n    _classCallCheck(this, HeadList);\n\n    if (!R.is(Array, rawList) || R.isEmpty(rawList)) return S.Left('No array recieved');\n    if (R.isNil(head)) {\n      this.head = R.head(rawList);\n      this.tail = R.tail(rawList);\n    } else {\n      this.head = head;\n      this.tail = rawList || [];\n    }\n    this[Symbol.iterator] = regeneratorRuntime.mark(function _callee() {\n      var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, e;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.head;\n\n            case 2:\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context.prev = 5;\n              _iterator = this.tail[Symbol.iterator]();\n\n            case 7:\n              if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                _context.next = 14;\n                break;\n              }\n\n              e = _step.value;\n              _context.next = 11;\n              return e;\n\n            case 11:\n              _iteratorNormalCompletion = true;\n              _context.next = 7;\n              break;\n\n            case 14:\n              _context.next = 20;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context['catch'](5);\n              _didIteratorError = true;\n              _iteratorError = _context.t0;\n\n            case 20:\n              _context.prev = 20;\n              _context.prev = 21;\n\n              if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n              }\n\n            case 23:\n              _context.prev = 23;\n\n              if (!_didIteratorError) {\n                _context.next = 26;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 26:\n              return _context.finish(23);\n\n            case 27:\n              return _context.finish(20);\n\n            case 28:\n            case 'end':\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[5, 16, 20, 28], [21,, 23, 27]]);\n    });\n  }\n\n  _createClass(HeadList, [{\n    key: 'append',\n    value: function append(e) {\n      if (R.isEmpty(this.tail) && R.isEmpty(this.head)) this.head = e;else this.tail.push(e);\n      return this;\n    }\n  }, {\n    key: 'toArray',\n    get: function get() {\n      return R.prepend(this.head, this.tail);\n    }\n  }, {\n    key: 'length',\n    get: function get() {\n      return R.defaultTo(0, this.tail.length) + R.isEmpty(this.head) ? 0 : 1;\n    }\n  }], [{\n    key: 'cyclic',\n    value: function cyclic(func) {\n      return function (list) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = list[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var e = _step2.value;\n\n            e = P(R.when(HeadList.isList, HeadList.cyclic(func)), func)(e);\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        return list;\n      };\n    }\n  }, {\n    key: 'hasTail',\n    value: function hasTail(list) {\n      return R.has('tail', list) && !R.isEmpty(list.tail);\n    }\n  }, {\n    key: 'last',\n    value: function last(list) {\n      return HeadList.hasTail(list) ? R.last(list.tail) : list.head;\n    }\n  }, {\n    key: 'lastR',\n    value: function lastR(list) {\n      var isStrict = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\n      var _hasTail = R.has('tail');\n      var notHas = P(_hasTail, R.not);\n      var cond = R.either(notHas, P(HeadList.last, notHas));\n      return R.until(isStrict ? cond : notHas, HeadList.last)(list);\n    }\n  }, {\n    key: 'emptyList',\n    value: function emptyList() {\n      return new HeadList([{}]);\n    }\n  }, {\n    key: 'isList',\n    value: function isList(list) {\n      return R.has('head', list);\n    }\n  }, {\n    key: 'prepend',\n    get: function get() {\n      return R.curry(function (val, list) {\n        list.tail = R.prepend(list.head, list.tail);\n        list.head = val;\n        return list;\n      });\n    }\n  }]);\n\n  return HeadList;\n}();\n\nmodule.exports = HeadList;","'use strict';\n\nvar R = require('ramda');\n\nvar util = require('../util');\nvar P = util.P;\n\nvar syntax = require('./syntax');\nvar types = syntax.types;\nvar op = syntax.op;\n\nvar checkToken = function checkToken(type) {\n  return function (val) {\n    return R.whereEq({ type: type, value: val });\n  };\n};\nvar checkOper = checkToken(types.op);\nvar checkType = R.propEq('type');\n\nvar def = function def(func, obj) {\n  return function (prop) {\n    return Object.defineProperty(obj, prop[0], {\n      get: function get() {\n        func(prop[1]);\n        return obj;\n      } });\n  };\n};\nfunction polymorph(store) {\n  return function ins(val) {\n    return R.ifElse(R.either(R.isNil, function () {\n      return R.isEmpty(store);\n    }), function () {\n      return ins;\n    }, R.anyPass(store))(val);\n  };\n}\nvar appender = function appender(store) {\n  return function (val) {\n    return store.push(val);\n  };\n};\nvar setter = function setter(store, ins, dict) {\n  return P(R.toPairs, R.forEach(def(appender(store), ins)))(dict);\n};\nfunction storage(dict) {\n  var store = [];\n  var ins = polymorph(store);\n  Object.defineProperty(ins, 'store', { get: function get() {\n      return store;\n    } });\n  setter(store, ins, dict);\n  return ins;\n}\n\nvar eq = {\n  op: R.map(checkOper)(op),\n  type: R.map(checkType)(types),\n  typedVal: R.map(checkToken)(types)\n};\n\nvar equals = {};\nObject.defineProperty(equals, 'op', { get: function get() {\n    return storage(eq.op);\n  } });\nObject.defineProperty(equals, 'type', { get: function get() {\n    return storage(eq.type);\n  } });\nObject.defineProperty(equals, 'typedVal', { get: function get() {\n    return storage(eq.typedVal);\n  } });\n\nmodule.exports = { eq: eq, equals: equals };","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar R = require('ramda');\n\nvar util = require('./util');\nvar S = util.S;\n\nvar P = util.P;\nvar log = util.log('tree');\n// const pipelog = util.pipelog('tree')\n\nvar HeadList = require('./model/head-list');\n\nvar Print = function () {\n  function Print() {\n    _classCallCheck(this, Print);\n  }\n\n  _createClass(Print, null, [{\n    key: '_indexTag',\n    value: function _indexTag(tag) {\n      return function (e) {\n        var separ = arguments.length <= 1 || arguments[1] === undefined ? ' ' : arguments[1];\n        return P(util.arrayify, R.prepend(tag), R.join(separ), log)(e);\n      };\n    }\n  }, {\n    key: 'arr',\n    value: function arr(tag, _arr) {\n      var iTag = Print._indexTag(tag);\n      return _arr.forEach(function (e, i) {\n        return iTag(i)(e);\n      });\n    }\n  }, {\n    key: 'to',\n    value: function to(func) {\n      return P(S.maybeToNullable, func);\n    }\n    // static get typeOrOper() {return R.ifElse(isOperator,prop.val,prop.type)}\n\n  }, {\n    key: 'headList',\n    value: function headList(tag, data) {\n      var index = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n      var level = arguments.length <= 3 || arguments[3] === undefined ? 0 : arguments[3];\n\n      var iTag = Print._indexTag(tag);\n      var padd = '   ';\n      var joinPadd = P(R.repeat(padd), R.join(''));\n      var objKeys = ['value'];\n      var keyValPrint = function keyValPrint(padding) {\n        return function (e) {\n          return iTag(['  ', joinPadd(level), padding, e[0]], '')(e[1]);\n        };\n      };\n      var tokenPrint = function tokenPrint(keys) {\n        return P(R.props(keys), R.zip(keys), R.forEach(keyValPrint(padd)));\n      };\n      var isRealIndex = function isRealIndex(i) {\n        return i === -1 ? '#  ' : i + 1 + (i + 1 >= 10 ? ' ' : '  ');\n      };\n      var nextLevel = R.add(2, level);\n      if (HeadList.isList(data)) {\n        keyValPrint(isRealIndex(index))([data.lexeme, data.index]);\n        Print.headList(tag, data.head, -1, nextLevel);\n        if (HeadList.hasTail(data)) data.tail.forEach(function (e, i) {\n          return Print.headList(tag, e, i, nextLevel);\n        });\n      } else {\n        keyValPrint(isRealIndex(index))([data.type, data.index]);\n        tokenPrint(objKeys)(data);\n      }\n    }\n  }, {\n    key: 'funcReplace',\n    get: function get() {\n      return R.when(P(R.last, R.is(Function)), function (e) {\n        return [e[0], 'FUNC'];\n      });\n    }\n  }, {\n    key: 'pair',\n    get: function get() {\n      return P(R.toPairs, R.map(Print.funcReplace()));\n    }\n  }]);\n\n  return Print;\n}();\n\nmodule.exports = Print;","'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar R = require('ramda');\n\nvar util = require('../util');\nvar S = util.S;\n\nvar P = util.P;\nvar RP = util.RP;\nvar log = util.log('tree');\nvar pipelog = util.pipelog('tree');\nvar prop = util.prop;\n\nvar Lexeme = require('../model/lexeme');\nvar HeadList = require('../model/head-list');\n\nvar types = require('../lang/syntax').types;\nvar tool = require('../lang/tooling');\nvar eq = tool.equals;\nvar Print = require('../print');\n\nvar tapArr = function tapArr(tag) {\n  return R.tap(function (e) {\n    return e.map(function (o, i) {\n      return pipelog(tag + ' ' + i)(o);\n    });\n  });\n};\n// const example = \"tokens :: Array prop 'type' indexOf _ 'tokens' equals -1 not\"\n// const exampleNoDef = \"prop 'type' indexOf _ 'tokens' equals -1 not\"\n//const onChecking = P(  R.prepend(  R.take(2) , R.equals('|>') ) , R.apply(R.ifElse) )\n//const __tranducer = P(R.ifElse(P(R.prop('value'),R.propEq('type','R')),P(R.prop('value'),R.of,R.append)),R.map)\n// const exampleTrans = \"ifElse <| prop 'value' propEq 'type' 'R' <|> prop 'value' of append |> map\" // _ identity\n\n// const isTokenCat = tokenArray=>P(prop.type,util.isContainOrEq(tokenArray))\n\nvar eitherToMaybe = R.map(S.eitherToMaybe);\n\nfunction indexation(data) {\n  var indexPipe = function indexPipe(e, i) {\n    return S.lift(R.assoc('index', i))(e);\n  };\n  var _indexation = function _indexation(list) {\n    return list.map(indexPipe);\n  };\n  return _indexation(data);\n}\n\nvar valEq = R.propEq('value');\nvar check = function check(func) {\n  return function (e) {\n    return R.both(S.isRight, valEq(true))(S.lift(func, e));\n  };\n};\nfunction stageHeader(data) {\n  var eiSplitOn = function eiSplitOn(func) {\n    return P(R.splitWhen(check(func)), R.adjust(R.tail, 1));\n  };\n\n  var split = {\n    context: eiSplitOn(eq.op.doubledots),\n    define: eiSplitOn(eq.op.define)\n  };\n  var writeField = function writeField(field, obj) {\n    return function (res) {\n      if (R.isEmpty(res[1])) {\n        obj[field] = false;\n        return res[0];\n      } else {\n        obj[field] = S.rights(res[0]);\n        return res[1];\n      }\n    };\n  };\n  var props = {};\n  var res = P(split.define, writeField('define', props), split.context, writeField('context', props));\n  props.data = res(data);\n  return props;\n}\n\nfunction headSplitter(isMaster, onMaster, changeLast) {\n  var lensLast = RP().length.dec.lensIndex.run;\n  var onEmpty = function onEmpty(e) {\n    return R.append(Lexeme.Pipe(new HeadList([e])));\n  };\n  var onSlave = function onSlave(e) {\n    return function (list) {\n      return R.ifElse(R.isEmpty, onEmpty(e), R.over(lensLast(list), changeLast(e)))(list);\n    };\n  };\n  var tranducer = R.map(R.ifElse(isMaster, onMaster, onSlave));\n  return R.transduce(tranducer, function (acc, val) {\n    return val(acc);\n  });\n}\nfunction intoAtomics(data) {\n  var changeLast = function changeLast(e) {\n    return P(util.arrayify, R.append(e.value));\n  };\n  var isMaster = P(prop.val, eq.type.R.op.context);\n  var onMaster = P(prop.val, R.of, R.append);\n\n  var tr = headSplitter(isMaster, onMaster, changeLast);\n  return tr([], data);\n}\nfunction intoPipes(data) {\n  var changeLast = function changeLast(e) {\n    return function (hList) {\n      return hList.append(e);\n    };\n  };\n  var pipeSymbols = eq.op.forwardpipe.middlepipe.backpipe;\n  var isMaster = R.both(HeadList.isList, P(prop.head, pipeSymbols));\n  var onMaster = P(R.identity, R.append);\n\n  var tr = headSplitter(isMaster, onMaster, changeLast);\n  return tr([], data);\n}\n\nfunction checkReplace(data) {\n  var replacers = [[eq.op.dash, types.any, R.__], [eq.op.equals, types.R, R.equals], [eq.op.plus, types.R, R.add], [eq.op.minus, types.R, R.subtract], [eq.op.map, types.R, R.map]];\n  var replacer = function replacer(type, value) {\n    return function (e) {\n      e.value = value;\n      e.type = type;\n      return e;\n    };\n  };\n  var doCheckReplace = function doCheckReplace(checker, type, value) {\n    return R.map(R.when(checker, replacer(type, value)));\n  };\n  var reducer = function reducer(acc, val) {\n    return doCheckReplace.apply(undefined, _toConsumableArray(val))(acc);\n  };\n  return R.reduce(reducer, data, replacers);\n}\nvar taplog = function taplog(tag) {\n  return R.tap(function (e) {\n    return Print.headList(tag, e, -1);\n  });\n};\nfunction lexemize(data) {\n  var whenHeadIsDo = function whenHeadIsDo(cond, action) {\n    return R.when(P(prop.head, cond), action);\n  };\n  var detectAtomic = whenHeadIsDo(eq.type.R.context, Lexeme.AtomicFunc);\n  var detectExpr = whenHeadIsDo(eq.type.op, Lexeme.Expression);\n  var detecting = P(function (e) {\n    return new HeadList(e);\n  }, detectAtomic, detectExpr, taplog('detectExpr '));\n  var lexemizing = P(S.lift(checkReplace), tapArr('checkReplace'), intoAtomics, pipelog('intoAtomics'), R.map(detecting));\n  return lexemizing(data);\n}\nfunction addArgName(data) {\n  var morph = function morph(e) {\n    return R.when(eq.type.arg.context, R.assoc('argName', e.value))(e);\n  };\n  var apply = function apply(e) {\n    return S.Right(morph).ap(e);\n  };\n  return R.map(apply, data);\n}\nfunction getSyntaxTree(data) {\n  var treePipe = P(indexation, tapArr('indexation'), addArgName, tapArr('argName'), eitherToMaybe, lexemize, //tapArr('lexemize'),\n  intoPipes);\n  var setTree = P(stageHeader, function (e) {\n    return R.assoc('tree', treePipe(e.data), e);\n  });\n  return setTree(data);\n}\n\nmodule.exports = getSyntaxTree;","'use strict';\n\nvar R = require('ramda');\n\nvar util = require('../util');\nvar S = util.S;\n\nvar P = util.P;\nvar log = util.log('tree');\nvar pipelog = util.pipelog('tree');\n\nvar HeadList = require('../model/head-list');\nvar Lexeme = require('../model/lexeme');\n\nvar tool = require('../lang/tooling');\n\nvar eqOp = tool.eq.op;\nvar stateNames = ['pipe', 'open', 'mid', 'close'];\nvar states = {\n  empty: 0,\n  pipe: 1,\n  open: 2,\n  mid: 3,\n  close: 4\n};\nvar actions = {\n  next: 0,\n  child: 1,\n  parent: -1,\n  error: NaN\n};\nvar opCond = function opCond(opVal) {\n  return R.both(Lexeme.its.expr, P(util.prop.head, opVal));\n};\nvar stateConds = {\n  pipe: Lexeme.its.pipe,\n  open: opCond(eqOp.backpipe),\n  mid: opCond(eqOp.middlepipe),\n  close: opCond(eqOp.forwardpipe)\n};\nvar stConds = R.cond(R.append([R.T, states.pipe], R.map(function (e) {\n  return [stateConds[e], function () {\n    return states[e];\n  }];\n}, stateNames)));\n\nvar switches = [[NaN, 1, 1, NaN, 1], // empty\n[NaN, 0, 1, NaN, 0], // pipe\n[NaN, -1, 1, 0, -1], // open\n[NaN, -1, 1, 0, -1], // mid\n[NaN, 0, 1, NaN, 0] // close\n];\nfunction optimise(data) {\n  var exprToPipe = R.when(Lexeme.its.expr, P(util.prop.tail, function (e) {\n    return new HeadList(e);\n  }, Lexeme.Pipe));\n  var singlePipeToAtomic = R.when(R.both(Lexeme.its.pipe, P(HeadList.hasTail, R.not)), util.prop.head);\n  return P(exprToPipe, singlePipeToAtomic)(data);\n}\nfunction Stack() {\n  var _this = this;\n\n  var appendTo = function appendTo(obj) {\n    return function (e) {\n      return obj.append(e);\n    };\n  };\n  this.value = [];\n  this.push = function (obj) {\n    return _this.value.push(appendTo(obj));\n  };\n  this.pushLast = function (result) {\n    return _this.push(HeadList.lastR(result, true));\n  };\n  this.pop = function () {\n    return _this.value.pop();\n  };\n  this.addToLast = function (val) {\n    return R.last(_this.value)(val);\n  };\n}\n\nfunction convolve(dataPack) {\n  var data = dataPack.tree;\n  if (!R.is(Array, data)) return S.Left('No array recieved');\n  var result = HeadList.emptyList();\n  var stack = new Stack();\n  var state = states.empty;\n  var i = 0,\n      len = data.length;\n  while (i < len) {\n    var e = data[i++];\n    var nextState = stConds(e);\n    var doAction = switches[state][nextState];\n    switch (doAction) {\n      case actions.child:\n        stack.pushLast(result);\n        break;\n      case actions.parent:\n        stack.pop();\n        break;\n    }\n    state = nextState;\n    stack.addToLast(optimise(e));\n  }\n  dataPack.tree = P(Lexeme.Pipe, optimise)(result);\n\n  return dataPack;\n}\n\nmodule.exports = convolve;","'use strict';\n\nvar util = require('../util');\nvar R = require('ramda');\nvar P = util.P;\nvar log = util.pipelog('tree');\nvar pipelog = util.pipelog('tree');\n\nfunction Outfall() {\n  this.id = Math.round(Math.random() * 10e5);\n  this.updated = false;\n  this._data = null;\n}\n\nObject.defineProperty(Outfall, 'gate', { get: function get() {\n    return new Outfall();\n  } });\nObject.defineProperty(Outfall.prototype, 'pipe', {\n  get: function get() {\n    var self = this;\n    return function (data) {\n      self.updated = true;\n      self._data = data;\n      return data[0];\n    };\n  }\n});\n\nOutfall.prototype.Spout = function (index) {\n  var isArg = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\n  return Spout(this, index, isArg);\n};\n\nfunction Spout(parent, index, isArg) {\n  var spout = Object.create(parent, {\n    data: { get: function get() {\n        return parent._data;\n      }, enumerable: true },\n    index: { get: function get() {\n        return index;\n      }, enumerable: true },\n    id: { get: function get() {\n        return parent.id;\n      }, enumerable: true },\n    isArg: { value: isArg, enumerable: true }\n  });\n  Object.defineProperty(spout, 'pipe', { value: function value() {\n      log('spout pipe')(spout.data[spout.index], spout);\n      if (R.isNil(spout.data)) return null;\n      return spout.isArg ? spout.data[spout.index] : spout.data[spout.index];\n    },\n    enumerable: true });\n  return spout;\n}\n\n// let stream = Outfall.gate\n// let joint = stream.Spout()\n\nmodule.exports = Outfall;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar R = require('ramda');\n\nvar util = require('../util');\nvar P = util.P;\nvar S = util.S;\nvar log = util.log('tree');\nvar pipelog = util.pipelog('tree');\nvar prop = util.prop;\n\nvar eq = require('../lang/tooling').equals;\n\nvar HeadList = require('../model/head-list');\nvar types = require('../lang/syntax').types;\nvar Lexeme = require('../model/lexeme');\n\nvar chain = function chain(func) {\n  return function (o) {\n    return o.chain(func);\n  };\n};\n\nvar IndexMap = function () {\n  _createClass(IndexMap, null, [{\n    key: 'indexation',\n    get: function get() {\n      return R.addIndex(R.map)(function (e, i) {\n        return R.pair(e.value, i);\n      });\n    }\n  }]);\n\n  function IndexMap(context) {\n    _classCallCheck(this, IndexMap);\n\n    var arr = IndexMap.indexation(context);\n    log('index map')(arr);\n    this._map = new Map(arr);\n  }\n\n  _createClass(IndexMap, [{\n    key: 'has',\n    get: function get() {\n      var self = this._map;\n      return function (e) {\n        return self.has(e);\n      };\n    }\n  }, {\n    key: 'get',\n    get: function get() {\n      var self = this._map;\n      return function (e) {\n        return self.get(e);\n      };\n    }\n  }, {\n    key: 'hasVal',\n    get: function get() {\n      var has = this.has;\n      return P(prop.val, has);\n    }\n  }]);\n\n  return IndexMap;\n}();\n\nfunction fillUserData(userData, dataPack) {\n  var indexMap = new IndexMap(dataPack.context || []); //TODO create dataPack.context as empty array\n  var isArgOrCont = eq.type.arg.context;\n  var morpher = HeadList.cyclic(modify);\n  dataPack.tree = morpher(dataPack.tree);\n  function modify(e) {\n\n    if (!isArgOrCont(e)) return e;\n    log('ee')(e, isArgOrCont(e));\n    if (!indexMap.hasVal(e)) log('ERRRROR!')(e);\n    var argIndex = indexMap.get(e.value);\n    var getArg = userData[argIndex];\n    log('refs')(e.type, argIndex, getArg);\n    // e.value = dataPack.gate.Spout(argIndex,eq.type.arg(e)).pipe\n    e.value = getArg;\n    return e;\n  }\n  return dataPack;\n}\nmodule.exports = { fillUserData: fillUserData };","'use strict';\n\nvar R = require('ramda');\nvar HeadList = require('../model/head-list');\nvar Lexeme = require('../model/lexeme');\nvar util = require('../util');\nvar P = util.P;\nvar pipelog = util.pipelog('tree');\nvar Outfall = require('../model/outfall');\nvar eq = require('../lang/tooling').equals;\n\nvar Context = require('./context');\n\nfunction CompileException(obj) {\n  this.message = 'Can not compile object ' + obj;\n  this.name = \"Compile exeption\";\n}\n\nfunction collectData(obj) {\n  var collect = R.cond([[R.is(Array), sayPipe], [Lexeme.its.pipe, sayPipe],\n\n  // [eq.type.arg,P(pipelog('arg'),R.prop('pipe'))],\n  [Lexeme.its.atomic, sayAtomic], [P(HeadList.isList, R.not), util.prop.val], [R.T, function (e) {\n    throw new CompileException(e);\n  }]]);\n  return collect(obj);\n}\n\nfunction sayPipe(list) {\n  var normalize = R.when(HeadList.isList, R.prop('toArray'));\n  return P(normalize, R.map(collectData), R.apply(R.pipe))(list);\n}\n\nfunction sayAtomic(list) {\n  var applyTailToHead = function applyTailToHead() {\n    return R.apply(collectData(list.head), R.map(collectData, list.tail));\n  };\n  return HeadList.hasTail(list) ? applyTailToHead() : collectData(list.head);\n}\n\nvar contextArgs = P(R.when(R.equals(false), function () {\n  return [];\n}), R.when(util.isof.Empty, R.append({ type: 'fakeContext', value: 'data' })), R.map(util.prop.val));\n\nfunction Runner(dataPack) {\n  var obj = function obj() {\n    for (var _len = arguments.length, userArgs = Array(_len), _key = 0; _key < _len; _key++) {\n      userArgs[_key] = arguments[_key];\n    }\n\n    dataPack.gate.pipe(userArgs);\n    var filled = Context.fillUserData(userArgs, dataPack);\n    var render = collectData(filled.tree);\n    return render.apply(undefined, userArgs);\n  };\n  Object.defineProperty(obj, 'data', {\n    value: dataPack\n  });\n  Object.defineProperty(obj, 'source', { get: function get() {\n      return obj.data.source;\n    }\n  });\n  Object.defineProperty(obj, 'args', { get: function get() {\n      return contextArgs(obj.data.context);\n    }\n  });\n  return obj;\n}\n\nfunction say(sourceString) {\n  return function (dataPack) {\n    dataPack.source = sourceString;\n    dataPack.gate = Outfall.gate;\n    return new Runner(dataPack);\n  };\n}\n\nsay.sayPipe = sayPipe;\nsay.collectData = collectData;\n\nmodule.exports = say;","'use strict';\n\nvar R = require('ramda');\n\nvar preproc = require('./core/string-preprocess');\nvar getTree = require('./core/tree');\nvar convolve = require('./core/convolve');\nvar Speak = require('./core/say');\n\nvar util = require('./util');\nvar P = util.P;\nvar log = util.log('index');\nvar pipelog = util.pipelog('index');\nvar Print = require('./print');\n\nvar taplog = function taplog(tag) {\n  return R.tap(function (e) {\n    return Print.headList(tag, e.tree, -1);\n  });\n};\n\nvar maptaphead = function maptaphead(tag) {\n  return R.tap(P(R.prop('tree'), R.map(function (e) {\n    return Print.headList(tag, e, -1);\n  })));\n};\n\nvar mapprint = function mapprint(tag) {\n  return R.tap(R.map(pipelog(tag)));\n};\n\nfunction say(data) {\n  return P(preproc, mapprint('preproc'), getTree, maptaphead('getTree'), convolve, taplog('conv'), Speak(data))(data);\n}\n\nvar pureExample = \"indexes data sright :: head prop 'index' concat @data sright\";\nvar simple = \"when <| == 1 not <|> + 10 |> + 100\";\n// const pure = P( R.when(P(R.equals(1),R.not),R.add(10)),R.add(100))\n\n// let convolved = say(pureExample)\nlog('example')(pureExample);\n\n// Print.headList('conv',convolved,-1)\nvar word = say(pureExample);\nvar indexes = [{ index: [1, 3] }, { index: [0, 1, 2, 3] }, 0];\nvar dat = [0, 5, 20, 30, 40, 50];\nvar sright = R.objOf('result');\n// let flipap = R.flip(R.append)\nvar res = word(indexes, dat, sright);\nlog('res')(res);\n\nmodule.exports = say;"],"names":["op","doubledots","comma","dash","arrow","doublearrow","middlepipe","backpipe","forwardpipe","equals","plus","minus","map","define","types","type","R","string","number","any","context","lex","F","arg","jstypes","Array","Number","String","Function","Object","RegExp","quotes","categories","piped","inserted","control","lexemeTypes","pipe","atomic","expr","module","exports","require$$1","require$$0","TokenFabric","curry","category","obj","value","e","Type","Operator","Any","Context","Arg","polymorph","store","ins","push","pop","apply","undefined","arguments","storage","dict","defineProperty","get","setter","def","func","prop","appender","_store","val","toPairs","forEach","RP","do","_toConsumableArray","arr","isArray","i","arr2","length","from","logic","acc","is","ifArr","append","P","_len","data","_key","actionList","reducer","red","reduce","flatten","flip","concat","require$$4","debug","require$$3","require$$2","pipefy","isof","Func","Nil","isNil","Real","Empty","isEmpty","Full","tagvalue","tag","mess","join","log","pipelog","tap","arrayify","defaultTo","unless","of","isContainOrEq","contains","_require","create","env","checkTypes","S","head","tail","isString","tokenType","condition","transformation","onCondition","util","allPass","either","__","appendArray","addSteps","Right","transformUntouched","identity","when","syntax","Token","quoteProcessor","isQuote","anyPass","isQuoted","last","removeQuotes","init","trim","typesProcessor","Map","isInMap","has","isNumber","isFinite","parseFloat","vendorProcessor","isFunc","isRamda","contextValidation","str","match","isContext","argValidation","both","isArg","preprocess","lift","postprocess","isType","isVendor","operators","values","stringMorpher","morph","stringTrim","rejectEmpty","reject","opersFuncs","split","intersperse","constFuncs","unnest","splitCond","symb","cond","T","unnester","symbPipe","splitsPipe","ap","splitter","cleaner","execFuncs","exec","splitKeywords","err","Error","beforeSplit","sSort","ifElse","Left","_drops","a","b","propEq","eqProps","drops","dropRepeatsWith","un","unary","singleWordParsing","fab","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","ILexeme","typename","this","index","lexeme","Lexeme","tokensHList","token","eq","HeadList","rawList","Symbol","iterator","regeneratorRuntime","mark","_callee","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","wrap","_context","prev","next","done","t0","return","finish","stop","prepend","list","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","isList","cyclic","hasTail","isStrict","_hasTail","notHas","not","until","checkToken","whereEq","checkOper","checkType","typedVal","Print","separ","_arr","iTag","_indexTag","maybeToNullable","level","padd","joinPadd","repeat","objKeys","keyValPrint","padding","tokenPrint","keys","zip","isRealIndex","nextLevel","add","headList","funcReplace","indexation","indexPipe","assoc","_indexation","stageHeader","eiSplitOn","splitWhen","check","adjust","writeField","field","res","rights","headSplitter","isMaster","onMaster","changeLast","lensLast","dec","lensIndex","run","onEmpty","Pipe","onSlave","over","tranducer","transduce","intoAtomics","tr","intoPipes","hList","pipeSymbols","checkReplace","replacers","subtract","replacer","doCheckReplace","checker","lexemize","whenHeadIsDo","action","detectAtomic","AtomicFunc","detectExpr","Expression","detecting","taplog","lexemizing","tapArr","addArgName","getSyntaxTree","treePipe","eitherToMaybe","setTree","require$$6","require$$5","tool","o","valEq","isRight","optimise","exprToPipe","its","singlePipeToAtomic","Stack","_this","appendTo","pushLast","result","lastR","addToLast","convolve","dataPack","tree","emptyList","stack","state","states","empty","len","nextState","stConds","doAction","switches","actions","child","parent","eqOp","stateNames","open","mid","close","error","NaN","opCond","opVal","stateConds","Outfall","id","Math","round","random","updated","_data","Spout","spout","self","fillUserData","userData","modify","isArgOrCont","indexMap","hasVal","argIndex","getArg","IndexMap","morpher","_map","addIndex","pair","CompileException","message","name","collectData","collect","sayPipe","sayAtomic","normalize","applyTailToHead","Runner","userArgs","gate","filled","render","source","contextArgs","say","sourceString","preproc","mapprint","getTree","maptaphead","Speak","pureExample","word","indexes","dat","sright","objOf"],"mappings":"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"}